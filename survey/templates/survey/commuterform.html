{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %}Check-in your commute to work!{% endblock %}

{% block javascript %}

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script src="{% static 'libs/jquery.json-2.4.min.js' %}" type="text/javascript"></script>
<script src="{% static 'libs/simpleStorage.min.js' %}" type="text/javascript"></script>
<script src="{% static 'libs/moment.min.js' %}" type="text/javascript"></script>

<script src="{% static 'js/form.js' %}" type="text/javascript"></script>

{% endblock %}

{% block body %}

<!-- <section> -->
<div class="row">
  <center>
    <h1>Walk/Ride Day Check-In</h1>
    <h2>{{ wr_day }}</h2>
    <p class="lead">Check in on the last Friday of every month. The Corporate Challenge takes place April through October.</p></center>
  </div>

  <form id="surveyform" role="form" class="form-horizontal row">

    {% csrf_token %}

    <input type="hidden" id="wr_day_month" name="wr_day_month" value="{{ wr_day.id }}">

    <hr>

    <div class="form-group">
      <div class="col-sm-12">

        <p>Green Streets Initiative will not share identifying information with any organization, other than with your employer or team, if your workplace is participating in the Challenge.

         <input type="checkbox" id="share"> Please do not share my identifying information with my employer.</p>

       </div>
     </div>

     <!-- 1 tell us about yourself -->

     <hr>
     <fieldset id="personalinfo">
      <legend>About you</legend>

      <div class="form-group">
        <label class="control-label col-sm-3 col-xs-2" for="name">Your name</label>
        <div class="col-sm-9 col-xs-10">
          <input id="name"  class="form-control" maxlength="50" name="name" type="text" >
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-3 col-xs-2" for="email">Your email</label>
        <div class="col-sm-9 col-xs-10">
          <input id="email"  class="form-control" maxlength="75" name="email" type="email">
          <span class="help-block"><span class="required">Required: </span> Please use your work email if your employer is part of the Walk/Ride Day Challenge</span>
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-3 col-xs-2">Your employer or team's name</label>
        <div class="col-sm-9 col-xs-10">
          <select class="form-control" id="employer" name="employer" data-placeholder="Choose an employer">
            <option selected></option>
            {% for employer in employers %}
            <option value="{{ employer.id }}">{{ employer.name|escape }}</option>
            {% endfor %}
          </select>
          <span class="help-block"><span class="required">Required: </span> Choose "Other" if not part of the Walk/Ride Day Challenge, or "Self" or "None" if applicable. Students may check in under "Student"</span>

          <select class="form-control" id="team" name="team" data-placeholder="Pick your team">
            <option selected></option>
            {% for team in teams %}
            <option value="{{ team.id }}">{{ team.name|escape }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </fieldset>

    <!-- location -->

    <hr>
    <fieldset id="locations">
      <legend>Your locations</legend>

      <div class="form-group">
        <label class="control-label col-sm-3 col-xs-2" for="home_address">Starting location</label>
        <div class="col-sm-7 col-xs-10">
          <input type="text" class="form-control address" id="home_address" name="home_address" placeholder="1 Main St, Boston, MA 02111">
          <span class="help-block"><span class="required">Required: </span> Where does your commute to work begin? You may enter the closest intersection if you do not wish to share your exact address.</span>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-3 col-xs-2" for="work_address">Work location</label>
        <div class="col-sm-9 col-xs-10">
          <input type="text" class="form-control address" id="work_address" name="work_address" placeholder="100 Main St, Boston, MA 02111">
          <span class="help-block"><span class="required">Required: </span> What is the address where you work? If you telecommute, please enter the work address where you most often work when not telecommuting.</span>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label  col-sm-3 col-xs-12">Your Commute (examples)
          <p class="commuteexamples"><strong>For illustrative purposes only.</strong> These routes are automatically generated from the locations typed above.</p>
          <div id="commute-distance" class="col-sm-12 col-xs-3"></div>
          <div id="commute-distance3" class="col-sm-12 col-xs-3"></div>
          <div id="commute-distance2" class="col-sm-12 col-xs-3"></div>
        </label>

        <div id="map-canvas" class="col-sm-9"></div>
      </div>
      {{ surveyform.home_location }}
      {{ surveyform.work_location }}
      {{ surveyform.distance }}
      {{ surveyform.duration }}

    </fieldset>

    <!--      walk/ride    -->

    <hr>

    <fieldset id="walkride">

      <legend>Walk/Ride Day {{ wr_day }}</legend>
      <h3>Going from <span class="point">home</span> to <span class="point">work</span> on this Walk/Ride Day:</h3>

      <!-- begin picking modes of transport -->
      <div id="w-to-work-legs">

        <div class="leg legB form-inline">
          <label class="then">I </label>

          <select class="form-control" name="mode" data-placeholder="Pick your mode">
            <option selected></option>
            {% for mode in modes %}
            <option value="{{ mode.id }}">
            {{ mode.name }}</option>
            {% endfor %}
          </select>

          <label> for </label>

          <input type="number" name="duration" class="form-control" >

          <span class="remove" style="padding-left: 1em;"></span>
          <input type="hidden" value="w" name="day">
          <input type="hidden" value="tw" name="direction">
        </div>
      </div>

      <div class="form-group row">
        <div class="col-xs-12" style="margin-left: 1em;">
          <button class="btn btn-primary morelegs pull-left" data-target='w-to-work-legs'><span class="button">Add more segments to this commute</span></button>
        </div>
      </div>

      <!-- end picking modes of transport -->
      <hr class="lite">

      <h3>Leaving from <span class="point">work</span> going <span class="point">home</span> on this Walk/Ride Day:</h3>

      <div class="form-group">
        <div class="col-sm-6"><label>I did the same, in reverse.</label></div>
        <div class="col-sm-6">
          <label class="checkbox-inline">
            <input type="radio" name="w-from-work-legs" class="morelegs yes" checked> Yes
          </label>
          <label class="checkbox-inline">
            <input type="radio" name="w-from-work-legs" class="morelegs"> No
          </label>
        </div>
      </div>

      <div class="hidden-legs">
        <hr class="lite">
        <div id="w-from-work-legs">

          <div class="leg legB form-inline">
            <label class="then">I </label>

          <select class="form-control" name="mode" data-placeholder="Pick your mode">
            <option selected></option>
            {% for mode in modes %}
            <option value="{{ mode.id }}">{{ mode.name|escape }}</option>
            {% endfor %}
          </select>

            <label> for </label>

            <input type="number" name="duration" class="form-control" >

            <span class="remove" style="padding-left: 1em;"></span>
            <input type="hidden" value="w" name="day">
            <input type="hidden" value="fw" name="direction">
          </div>
        </div>

        <div class="form-group row">
          <div class="col-xs-12" style="margin-left: 1em;">
            <button class="btn btn-primary morelegs pull-left" data-target='w-from-work-legs'><span class="button">Add more to this commute!</span></button>
          </div>
        </div>

      </div>

    </fieldset>



    <!--   normal       -->
    <hr>

    <fieldset id="normal">

      <legend>Your normal commute</legend>

      <h3>Going from <span class="point">home</span> to <span class="point">work</span> on most other days:</h3>

      <div class="form-group">
        <div class="col-sm-6"><label>I take the same commute as on Walk/Ride Day.</label></div>
        <div class="col-sm-6">
          <label class="checkbox-inline">
            <input type="radio" name="n-to-work-legs" class="morelegs yes" checked> Yes
          </label>
          <label class="checkbox-inline">
            <input type="radio" name="n-to-work-legs" class="morelegs"> No
          </label></div>
        </div>


        <div class="hidden-legs">
          <hr class="lite">
          <div id="n-to-work-legs">

            <div class="leg legB form-inline">
              <label class="then">I </label>

              <select class="form-control" name="mode" data-placeholder="Pick your mode">
            <option selected></option>
            {% for mode in modes %}
            <option value="{{ mode.id }}">{{ mode.name|escape }}</option>
            {% endfor %}
          </select>

              <label> for </label>

              <input type="number" name="duration" class="form-control" >

              <span class="remove" style="padding-left: 1em;"></span>
              <input type="hidden" value="n" name="day">
              <input type="hidden" value="tw" name="direction">
            </div>
          </div>

          <div class="form-group row">
            <div class="col-xs-12" style="margin-left: 1em;">
              <button class="btn btn-primary morelegs pull-left" data-target='n-to-work-legs'><span class="button">Add more to this commute!</span></button>
            </div>
          </div>

        </div>

      <hr>
      <h3>Leaving from <span class="point">work</span> going <span class="point">home</span> on most other days:</h3>

      <div class="form-group">
        <div class="col-sm-6"><label>I did the same, in reverse</label></div>
        <div class="col-sm-6">
          <label class="checkbox-inline">
            <input type="radio" name="n-from-work-legs" class="morelegs yes" checked> Yes
          </label>
          <label class="checkbox-inline">
            <input type="radio" name="n-from-work-legs" class="morelegs"> No
          </label></div>
        </div>


        <div class="hidden-legs">
          <hr class="lite">
          <div id="n-from-work-legs">

            <div class="leg legB form-inline">
              <label class="then">I </label>

              <select class="form-control" name="mode" data-placeholder="Pick your mode">
              <option selected></option>
              {% for mode in modes %}
              <option value="{{ mode.id }}">{{ mode.name |escape }}</option>
              {% endfor %}
            </select>

              <label> for </label>

              <input type="number" name="duration" class="form-control" >


              <span class="remove" style="padding-left: 1em;"></span>
              <input type="hidden" value="n" name="day">
              <input type="hidden" value="fw" name="direction">
            </div>
          </div>

          <div class="form-group row">
            <div class="col-xs-12" style="margin-left: 1em;">
              <button class="btn btn-primary morelegs pull-left" data-target='n-from-work-legs'><span class="button">Add more to this commute!</span></button>
            </div>
          </div>

        </div>

      </fieldset>
      <hr>

          <!-- comments etc -->
          <h3>Comments or feedback:</h3>
          <textarea id="comments" class="form-control" rows="3"></textarea>

            <hr class="lite">
            <div class="form-group">
              <div class="col-sm-12">
                <label class="checkbox">
                  <input type="checkbox" id="volunteer"> I would like to volunteer to help support Green Streets' efforts.
                </label>
              </div>
            </div>

             <hr>


          <!-- submit -->

          <div class="form-actions">
            <div id="notvalidated" class="alert alert-danger alert-dismissable">
              <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
              <strong>Oops.</strong> Please fill in required information above.
            </div>

            <button type="submit" class="btn btn-large btn-primary btn-form-submit optional" style="font-size:18px;">Answer optional questions</button>
            <button type="submit" class="btn btn-large btn-success btn-form-submit" style="font-size:18px;">Check-in my commute and exit</button>
          </div>

        </form>

        <!-- </section> -->

        {% endblock %}
